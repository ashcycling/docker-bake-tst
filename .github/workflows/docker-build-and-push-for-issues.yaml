name: GitHub Actions without Main Branch
run-name: ${{ github.actor }} is fixing ${{ github.ref_name }} ðŸš€
on: 
  push:
      branches-ignore:
          - 'main'
jobs:
    Docker-Build-and-Push-for-Issues:
      runs-on: self-hosted
      steps:
          # -
          #   name: Set up Docker
          #   uses: docker/setup-docker-action@v4
          - name: Login to GitHub Container Registry
            uses: docker/login-action@v3
            with:
              registry: ghcr.io
              username: ${{ github.repository_owner }}
              password: ${{ secrets.TOKEN_PKG }}
          -
            name: Set up Docker Buildx
            uses: docker/setup-buildx-action@v3
          -
            name: Build and push
            uses: docker/build-push-action@v6
            with:
              # context: "{{defaultContext}}:cmd/consumer"
              file: ./cmd/consumer/Dockerfile.distroless
              push: true
              tags: ghcr.io/${{ github.repository_owner }}/consumer:${{ github.ref_name }}
        